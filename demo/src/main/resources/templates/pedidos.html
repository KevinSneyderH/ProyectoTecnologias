<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Pedidos</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Inter', sans-serif;
        }

        body {
            background-color: #e3f2f1;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        header {
            background-color: #f9f6e9;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #ccc;
        }

        header h1 {
            color: #2b4d4d;
            font-size: 1.5rem;
        }

        .logout-btn {
            background-color: #ffe9af;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
        }

        .toggle-sidebar-btn {
            background-color: #ffe9af;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            margin: 1rem;
            align-self: flex-start;
        }

        .container {
            display: flex;
            flex: 1;
            flex-direction: row;
        }

        aside {
            background-color: #b3d6d4;
            width: 240px;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            transition: transform 0.3s ease;
        }

        aside.hidden {
            transform: translateX(-100%);
            position: absolute;
            z-index: 1;
        }

        .user-info {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 1rem;
        }

        .user-info img {
            width: 60px;
            border-radius: 50%;
        }

        .nav-button {
            background-color: #f0fafa;
            border: none;
            padding: 0.8rem;
            border-radius: 8px;
            text-align: left;
            font-weight: bold;
            cursor: pointer;
        }

        .nav-button.active {
            background-color: #103d3c;
            color: #fff;
        }

        main {
            flex: 1;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .top-actions {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .top-actions button {
            background-color: #14424b;
            color: white;
            padding: 0.8rem 1.2rem;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
        }

        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
        }

        .card {
            background-color: #fff;
            border-radius: 10px;
            padding: 1rem;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 0.5rem;
        }

        th,
        td {
            text-align: left;
            padding: 0.5rem;
            font-size: 0.9rem;
        }

        th {
            background-color: #f0fafa;
        }

        .table-container {
            overflow-x: auto;
            width: 100%;
        }

        .center-search {
            display: flex;
            justify-content: center;
            width: 100%;
            margin: 1rem 0;
        }


        .search-container {
            display: flex;
            align-items: center;
            background-color: #e8f1f0;
            /* color de fondo contenedor */
            padding: 10px;
            border-radius: 10px;
            width: fit-content;
        }

        .search-input {
            padding: 10px 15px;
            border: none;
            border-radius: 6px 0 0 6px;
            outline: none;
            background-color: #fdf5dc;
            /* color crema */
            color: #333;
            width: 250px;
            font-size: 14px;
        }

        .search-button {
            background-color: #14424b;
            /* azul oscuro */
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 0 6px 6px 0;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .search-button:hover {
            background-color: #0f363d;
        }

        /* Modal Background */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        /* Clase para mostrar el modal */
        .modal.show {
            display: block;
            opacity: 1;
        }

        /* Modal Container */
        .modal-content {
            background-color: #e6f4ea;
            margin: 5% auto;
            padding: 2rem;
            border-radius: 1rem;
            width: 90%;
            max-width: 500px;
            transform: translateY(-30px);
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
        }

        .modal.show .modal-content {
            transform: translateY(0);
            opacity: 1;
        }

        /* Modal Title */
        .modal-content h2 {
            font-size: 1.75rem;
            font-weight: 600;
            text-align: center;
            margin-bottom: 1.5rem;
        }

        /* Form Labels and Inputs */
        .modal-content label {
            display: block;
            margin-bottom: 1.5rem;
            font-size: 0.875rem;
        }

        .modal-content input[type="text"],
        .modal-content input[type="number"],
        .modal-content input[type="date"],
        .modal-content input[type="url"] {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ccc;
            border-radius: 0.5rem;
            margin-top: 0.5rem;
        }

        /* Buttons */
        .modal-content .top-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            justify-content: space-between;
            padding-top: 1rem;
        }

        .modal-content button[type="submit"],
        .modal-content button[type="button"] {
            flex: 1;
            min-width: 120px;
            background-color: #16a34a;
            color: #ffffff;
            padding: 0.75rem 1rem;
            border: none;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: background-color 0.3s;
            text-align: center;
        }

        .modal-content button[type="button"] {
            background-color: #dc2626;
        }

        .modal-content button[type="submit"]:hover {
            background-color: #15803d;
        }

        .modal-content button[type="button"]:hover {
            background-color: #b91c1c;
        }

        /* Close Button */
        .closePedido {
            float: right;
            font-size: 28px;
            font-weight: bold;
            color: #aaa;
            cursor: pointer;
        }

        .closePedido:hover {
            color: #000;
        }

        /* Responsive Adjustments */
        @media (max-width: 640px) {
            .modal-content {
                padding: 1.5rem;
            }

            .modal-content h2 {
                font-size: 1.5rem;
            }

            .modal-content button[type="submit"],
            .modal-content button[type="button"] {
                flex: 1 0 100%;
                margin-bottom: 1rem;
            }
        }

        /* Hacer responsive: ancho casi completo en pantallas peque√±as */
        @media (max-width: 600px) {
            .modal-content {
                width: 90%;
                margin: 10% auto;
            }
        }

        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }

            aside {
                position: absolute;
                height: 100vh;
                z-index: 1000;
            }

        }
    </style>
</head>

<body>
    <header>
        <h1>Pedidos</h1>
        <form action="/logout" method="post">
            <button class="logout-btn">Cerrar Sesi√≥n üè°</button>
        </form>

    </header>
    <button class="toggle-sidebar-btn" onclick="toggleSidebar()">‚ò∞ Men√∫</button>
    <div class="container">
        <aside id="sidebar">
            <div class="user-info">
                <img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBwgHBgkIBwgKCgkLDRYPDQwMDRsUFRAWIB0iIiAdHx8kKDQsJCYxJx8fLT0tMTU3Ojo6Iys/RD84QzQ5OjcBCgoKDQwNGg8PGjclHyU3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3N//AABEIAJQAlAMBEQACEQEDEQH/xAAcAAACAgMBAQAAAAAAAAAAAAAABgUHAQMEAgj/xABDEAABAwMABgcFBQUGBwAAAAABAAIDBAURBhIhMUFRBxMiYXGBkTKhscHRFCNCUmIVM0Ph8GOSorLC8RYkJVNUcoL/xAAbAQEAAgMBAQAAAAAAAAAAAAAAAgQBAwUGB//EADMRAAICAQMDAgIIBgMAAAAAAAABAgMRBCExBRJRE0EicTJCYYGRscHRFBUjUqHwBuHx/9oADAMBAAIRAxEAPwC8EAIAQAgBAGUBH116t1ASKqqY1w/AO070CnGEpcI0W6mmr6UiDqdN6NpIpaaabkXEMHzWxUP3KU+qVr6KbI+XTyYPaxtJTsLvZD5SSfgpegvJp/mljWVDYw3Tiu/8OnIHIu+qz/DryR/mtn9qOiHTp2cVFuGOcc3yI+ai6PtJx6q/rQ/yStJpfapyBLI+nd/at2eoUHTJFqHUqJcvHzJyGoinYJIJGyMO5zCCFqaa5LsZRksxZsQkCAEAIAQAgBACAEAICIvOkFHaRqyuMk/CFm0+fJTjXKXBV1Gsro2e78CRdNJbjcHOHW9RCf4cRx6neVajVGJxbtddbtnC8C7W18FE6BkrsyVEgjiYN7iTv8BxKk5JGiqmdmWuFyQWlmkhtzvsVCQaojMjztEQO7xK1znjZF7Q6JWr1J8fmQFtvTbZDJVHNXdKnIMkjsiJmdgzzJ24HctcZY39zoXaX1moPaC9vJyVN6uda/72smIJ2MjdqDw2Y96OTZur01Nf0YkrbK622rEk5nr6ziWuOpH3Ak7T3+ikpJcle+m+/aOIx/y/2Jun0voJHATRzQ7caxGsPctitRRn0q2O8WmMlBXSwFtRQzvjLtocw4yO/n5qTSktygpWUy2eGN9o00OWxXVgxu6+MfEfRaJ0/wBp1KOp+1q+8cKeeOoibLDI2SNwy1zTkFaGsHWjJSWYvKNiwSBACAEAIAQAThAJ+kulXVOfSWtwLxsfPnY08m9/erFdWd5HI1mv7fgq58/sJT3F7i5xLnE5JJySVZOO228swhgrbSivli0wMryS2jkj1Gg8MNcfXJVWUvjPQ6SlPSY8pkRXzGquNVUF2t1krnB3MZ2e7Ci3llyqPZBR8GtoWDYbGrIM5cdjdnMlMgk7ZcZLdh1PDTGXjLIzWf652eWFKLxuaLtPG7aTePmMlDpaHkNr6fUyf3kWT7ltVnk513SnjNT+5jJBNFURNlgkbJG7c5pyFsTzwcicJVvtksMlbNeaq0Ta0LtaFx7cLtzvoe9RnWpI3afUzoe3Hgse03OmulK2alds3OYd7DyKpyi4vDPRUXwuj3RO5RNwIAQAgBAJ2mOkDoybbRPw87J5Gna39I71Yqr+szka/WY/pQ+/9hKVk4wICE0qvX7Hoh1ODVTZEQP4ebvL44Wuyfai7otN689+F/uCsiTI/L3Oe9x3nLnOJ+Kq5PRpeyHCi6NtIKukjmjFMx7hkwyyFrmjhnYRnuzsVb+Mq7sblj+Gs7cnHWaFaSUJPW2iokYPxwASj0bk+5bY6iqXEiDqmuUctHo/eax/V01prnO4/cOaB4k4AU5W1x5kvxIqEnwhhpOjXSSePXMVHTbM6s8+3w7APxWmWrqXG5tWnsfsK94tdys9Z9kusMtPLvb+V45tcN4Viqddm6ZWtVkHjBusM1DDWhtzpmTU8hDS9+T1Z5+HNWfTiUb3bKPwPDLHpKOmo2uFJAyJrtpDBgFTSS4OFZbZY/jeToWTWdlpuU9qrG1FO48nszseORUZxUlhm6i+VM+6JaFtrobjRx1NO7LHjcd7TxB71RlFxeGemqtjbFSidSwbAQAgIfSe7C0290jCPtEvYiHfz8lOuPdLBU1mo9CvK5fBWTnFzi55JcTkknOSrx5tvLyzCGAQCB0hwPbc6acuPVyQlrRwBadv+YKtcviyd3pck6nH3T/MOjWnp6jSYfaYw90ULpYs7g4EDOOOwrn6yTVWx3NJFOzcvahYG0zOZGSuWuDpPk3rJgMlDGAQyLnSFQ01dohdDVQskdT075oXEbWPa0kEHh9Ct2nk1Yse5pvinB5PnwPLQeIxxXajZKPByXBSLetcUkFupYpna0jIWtc48ThW1nG55W5qVkmuMnUsmsEBO6JXc26vEErsU07g08mO4H5FabYZWUXtBqfSs7XwyyRuVQ9ECAwdiArLSq4m43eQtOYofu4/LefM/JXao9sTzWtu9W144WyIdbCoCAEAt6e0vX2PrwMvppA/yPZPxHotNy2ydHplnbd2+UcnRhb2slrb3VP6qnp4zE1zjgbcFxPcAB6nkuRrZ5Srjyz1ekju7HwhrpelfR5ruocysDWbBKIwQ7vAzn1C1rRWYNj1kMjJo/phZNIah9Na6p76hkZkdG+F7CG5AztGN5HHitVlE61mSNsLozeIkzUzxUtNLUVD9SKJjnvdjOq0DJOzuC1JZeETbwssT6npR0WhGY6qom5alM4A/wB7CsrR2s0PV1o3W7Say6d224WmjqJYJpqd7HMlaA4NcMawwSCBlYdUqWpPcK2NycVyU5bbVMNJYbZVsxLFOWzN3jsbT5HV966teJNYOTqZ+lVKXj/wtRXjygIAQAgLM0TuRuFpj6x2Zofu5O/G4+mFStj2yPSaG71aVnlbE0tZcI7SCsNBZ6qoacPDNVn/ALHYPipwj3SSK+qt9KmUiqtyvHlwQAgBAeZrf+06aekIGpKwtcTuGf69yram+umHx+5e6fpb77c1L6PLNWh9qj/4PoqKuha7LnvmjO5zusccHnjA9FwdRa1c5I9vRWnUkzo0iqmW2rtdJVUVGynrNbE1Sw6kTRsGwA7yMD/ZbKqJNKUpYbIW6iKfao5wTWjtjoaNkV2pLdT0r6uBhDo2apdG/Bwfd6LXb6kfhk8olU65fFBYZO1UTKmF1PMwPilBZIw7nNIOR57vNak8PKNrW2BIvE9r0ZvlPb6SyWqkjfTmodVTQF2wa2AA1uSTqnGSrsYykszkUpThF4jEb20EUtTDNXUMUVbSk6kjOAI3tdgEtIO4/JaLFOtuOdjfW42LuS4EOaxSy9Il/r4Yg5kUMLtm/MjACf8AA4+a6OjuhFRUnuzi9Wptsg/TWUt2di6p5YEAIAQDJoLWfZ7u6mc7s1DMY/U0Ej3ay03rKydHplvbb2eSwlUO+KfSDUalDS04P72QuI7mj6kLfQt2zldUniuMfIiq0cQEAIAQHdSO1aN5b7WttK4PVM+ss+D2P/Hu3+GljnP6I6bWxsMEbXDLeseT4F5PzXPm8yyduKwsDHWU9PXsjZXU8NQ2IkxiWNrtXwyFvV00sZK7og3nBsme6UDXOcAADGMDkFCU5TeZE4QjBYRgjtDPeokjxVU9PWPhkrKeGd8H7p0sbXFvmQtqumvc1OiDecG6WR8ztaRxce9QlJyeWbIwjBYQuxB8WlNS5p2SuYHD8wEY/msSlwkYjFLubIScNE8oZ7Ie7HhleohnsWT55ckrJJcZf5nhTNYIAQHTbJ/stxpp93VytJ8M7fcoyWYtGymfZZGXhluBUD1gi9ITya6jZwbE4+p/krVHDOH1X6cfkKi3nLBACAEB0UUrWSFknsP2eaodQ07tr7o8o7HRtatNc4zfwy/P2JOGPq49XOduxeeZ7YnqWTrKdjuONqmuDXweaqcQahcDqk7SOCN4MpZPDqyIljYtZ7i4cOCZQwzqWTAIGQdbIyhnqKtz2mokyIWA5LdmMnyVrS6aVs02tjm9R6hDT0tJ/E+BcG5eiPDmUAIAQHl/sHHJAy5Kd/WQRv8AzNDvULnvk9dB5imI3SCP+p03LqP9RVmjhnF6qv6kfkKy3nLBACAEAICRtj9Zj2k5IIIyuH1SvEoyS5PWf8evc651t5ax+BP2t+Y3sPA5C5sTvyOl8oGfupHeDMqRE1xyxtJLaWVh4kQ4WDJ0NOsM4I8RhZAEgAknAG88kSy8GG0lliG5/WPdId7iXHzXq0sJI+byl3ycvJhZMAgBACAwdxQFv28YoKYcom/ALnvk9bX9BCj0hxHXoZgNmHsJ/ukfNWKPc5PVY7wl8/0E9WDkAgBACAEB7hkdE8OZjO7B3Fab6YW1uMi1o9TZprlOv5fMlrTc431Bb7E8eyWEnbjmOY715qdTglL6r9z30bVNuPuhjOrKwYOWuGQQVHkya46fUdl0kjzw1imDOTa5wY0ucQGgZJPALKWdkYbxuLFxvv2yIsow5sDzgTf90c2/p7+PBdjR6OKfdPle3g811fqFmFXXspe/lfsRK6h5sEAIAQAgBrHSuEbPaeQ0eJ2IMOWy9y5GAMaGjYBsC556/jYgNOKXr7I6Roy6B7X+W4/FbKXiRQ6lX3UZ8FdK4efBACAEAIBd0lvrqKWGjpD989zdd3FoJ3DvKPCi2y/otP6klKXAy1tGKosLZTDURkmKdm9h+Y5heY097q5WYvlf7+Z7fUaf1VlPElw/9/IhrlpbfaRhoJDFSSs2Pe1u13e0nYAe73Ltabp+ml/Ui+5PheDianXamP8ATl8L9/tIq36TXa3zGWG4PcHOy5sztdrj3g/LCvW6Kq1YlH9CnXq7K3mMvx3G+CquOk8UU1yjFPb2gEU8ZP8AzDubj+Xu4rh3yq0bcanmXnx8vtO1RG3VpSt2ivbz/wBHBplcH2a5W3rGYp6iN4IG8YIwferPSGnCUZeeSj1zTq1xa5SOlj2yND2HLSMgrptNPDPKPZnpYAIAQAgJPRml+2XykZjLWya7u4N2/IeqhY8RZZ0cO++K+/8AAtIKiemNdVAypppYJRlkjS13gQsp4eTE4qcXF+5UdVTyUlTLTzD7yJ5a7vV9PKyeTnBwk4v2NSyRBACABvQFZ105rLqanOdacOHhnA9wClYvgO9pkouMfkWufaPivHHsCToKcVlORlpLDgteOHBSWVwyLx7o3stOoezHAzmQP5LOZv3I4h4O6noWRkOedd3uCio4Mt5EPpcoTV1NlwOwOuDzyHYXc6PBzlJL7P1ON1Wagov33Oeyyl9O5hOdR2zwO345Xb1UcSz5PJXLEskiqxqBACAEA6dH9CQKiveNh+6j/wBXyHkVWvl7HZ6XVs7H8kOSrnXBAJOntr1ZGXKJvZOGTAcDwPy9FZon9U43U6MP1V94nqwcgEBwV95t1BkVNUwPH4Gdp3oEN1enss4QuXDTNzmuZQUuARjrJTtHgB9UL1egS3mxcGMAjcRsVhPKN7WGNFi0rkpWtp7jrSxDY2UbXtHfzC5Or6YrH31bPwdTS9ScF2W8eR7sF2pZJ2S0tQySJ3ZeA7aPEbwuJZTZU8TWDswthbHMXkby4BpcTgDaSdwUMN7Iy2ktxdvWl1DQB0dI5tVU7tVh7DfF30XW0nSbrmpT+GP+Tl6rqlVWYw+JiBcK+puNSamskL5NwG4NHIBeoooroh2VrY85dbO6XfY8s5orlLQzHqQ1wIGu13H+srVfiTwR9FTjlktS3+lmwJ2mBx5nLfVVXW0aJ6aS43JWN7JWh0bmvaeLTkKBXaa5PSGDdSU0tZUxU0AzJI4NCxJ4WSdcJWSUI8ste30kdDRxU0I7EbQAefMqhJ5eT1NVargoR9jpWDYCA1VNPHVQSQTNDo5GlrmniFlPDyRnFTi4vhlJ6d1b9Eq0UjoJJnStL4JCMMc3PE8xxA+YV2E1JHD/AJdJTeXsV9X3+5V5IlqSyM/w4uyPdt96mXK9PXX9FEXhDce2xl24eqkotkXNI3xjUGq49nn+VbEnE1N9x7Ddp1jgDaSeCk2iON8GBJJn7kuhHNuxx81Bpz2fBNSUOORx0tu9XdKCxsiqXxubQtlmAPZe9xLTnn7B9VR0OndcrJLnOC7rr1OMIvhrJEUVW6Q9TUtDJgNmNzhzH0XZqt7tpcnIsqUd48G+om6poA2vd7I+anOfavtIQj3HH5kniVV5N4IDZBPLTv14JHRu5tOEayYlFSWGiWpdIZY8fa4xI3drN2O+i1utPgrS0sX9EuDQezGCkbcqmJ0c87MxskGHRsPMcCVQunl4R0dBpHUu+fLGtaDoggBACAhdLNGqDSi0vt9wZ+qKZoGvC/Gxzf62hSjJxeUYaT2PmzSfRq5aNXV9BcYsH2opmg6kzebT8RvCuwl38Faa7COZGG7xkqxGGCtKbZ7UyAY3pgGdY6urnIUe0lkwpESThmfNBFr/AMNnVtxyBP1UYxSzj3Myk3jPjBlwOWuZjXaQWk7lLOGmiO3DM4JcXPcXPO9xRtt5ZjbGEZQAgMZA3oC0OjnQJxfDeL7CWgEPpqWQej3j4DzKpai/6sS5RRj4pFqhUi4ZQAgBACAEBG36x2+/0D6K6U7ZoXbQdzmH8zTwPepRk4PKMSipLDKN0y6OLro+6Spo2vr7cNvWxt7cY/W0fEbPBX6tRGWz2ZSnQ47rgSAQRkEEcCFZNAIYBACA7qL9x5oGdCEQQAgOq2W2tutUKW3U0lRMfwsG4cydwHioynGKy2SjFyeEW9oX0dU1pcyuu5jq65uCyMDMUJ35GfaPfw4KhbqHLaOyLtWnUd5cj4AqxZMoAQAgBACAEAIAPcgE/Sbo5sF/c+YwGjq3b56bDdY/qbuPjjPet0L5wNc6oyK1vXRJpBQaz7c+C5xjcI3CJ5/+XHH+JWo6qD52K0tNL2YnXGyXa1l37RttXTBoyXSQkNA8dysRsjLhml1zXsRokY72XtPgVMjho76Fw6k7R7R4qKIyaOqBrqiTq6djppPyRNLj6BZbS5MJZ4J+26E6SXIt6m1yxsP8SoIjaPXb6ArTK+uPLNsabHwh2sfRNExwkvtcZv7CmBa3wLztPlhV56t/VRvhpf7mWHbLXQ2qnFPbqWKnhH4Y24yeZ5nxVWUnJ5ZbjFR2R2KJkEAIAQAgBACAEAIAQAgBAYxhAc09uoal2tUUVNKTxkia74hE2YwjU2y2qM5ZbKJp7qdg+Sz3PyMI7I42RN1ImNY0cGjAWDOD1hAZQAgBACAEAIAQH//Z"
                    alt="Avatar">
                <strong th:text="${nombreUsuario}">Nombre</strong>
                <span th:text="${rolUsuario}">Rol</span>
            </div>

            <button onclick="location.href='/Principal'" class="nav-button">Principal</button>
            <button onclick="location.href='/Productos'" class="nav-button">Productos</button>
            <button onclick="location.href='/Proveedores'" class="nav-button">Proveedores</button>
            <button class="nav-button active">Pedidos</button>
            <button onclick="location.href='/Transacciones'" class="nav-button">Transacciones</button>
            <button class="nav-button">Informes</button>
        </aside>
        <main>


            <div class="dashboard">
                <div class="card">
                    <div class="card">
                        <div class="top-actions">
                            <button id="openModalBtnPedido">Crear Pedido</button>
                        </div>
                        <div class="center-search">
                            <div class="search-container">

                            </div>
                        </div>

                        <h3>Pedidos</h3>
                        <div class="table-container">
                            <table id="productTable">
                                <thead>
                                    <tr>
                                        <th>Fecha Creacion</th>
                                        <th>Costo Total</th>
                                        <th>Estado</th>
                                        <th>Usuario</th>
                                        <th>Numero de Pedido</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr th:each="pedido : ${pedidos}">
                                        <td th:text="${pedido.fechaCreacion}">-</td>
                                        <td th:text="${pedido.costototal}">-</td>
                                        <td th:text="${pedido.estadopedido}">-</td>
                                        <td th:text="${pedido.idUsuario.nombreUsuario}">-</td>
                                        <td>
                                            <div class="top-actions">
                                                <button type="button" class="edit-product-btn"
                                                    data-pedido-id="[[${pedido.id_pedido}]]">
                                                    Detalle Pedido
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <!-- Modal para crear pedido -->
                <div id="pedidoModal" class="modal">
                    <div class="modal-content">
                        <span class="closePedido" style="cursor:pointer;">&times;</span>
                        <h2>Crear pedido</h2>
                        <form id="crearPedidoForm">
                            <input type="text" placeholder="Buscar producto..." id="buscarProducto">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Producto</th>
                                        <th>Cantidad</th>
                                        <th>Precio unidad</th>
                                        <th>Total</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr th:each="prod : ${productos}">
                                        <td th:text="${prod.nombre}"></td>
                                        <td>
                                            <input type="hidden" name="productoIds" th:value="${prod.id_producto}">
                                            <input type="number" min="0" name="cantidades"
                                                th:data-precio-unitario="${prod.precio_venta_unitario}" value="0"
                                                class="cantidad-input">
                                        </td>
                                        <td th:text="${prod.precio_venta_unitario}"></td>
                                        <td class="subtotal-cell">$0</td>
                                    </tr>
                                </tbody>
                            </table>
                            <div>
                                <strong>Total: $<span id="totalPedido">0</span></strong>
                            </div>
                            <div class="top-actions">
                                <button type="button" id="cancelPedidoBtn">Cancelar</button>
                                <button type="submit">Guardar</button>
                            </div>
                        </form>
                    </div>
                </div>
                <div id="detallePedidoModal" class="modal">
                    <div class="modal-content">
                        <span class="closeDetallePedido" style="cursor:pointer;">&times;</span>
                        <h2>Detalle del Pedido</h2>
                        <table>
                            <thead>
                                <tr>
                                    <th>Producto</th>
                                    <th>Cantidad</th>
                                    <th>Subtotal</th>
                                </tr>
                            </thead>
                            <tbody id="detallePedidoBody">
                                <!-- Aqu√≠ se llenar√°n los detalles por JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
                <script>
                    // Modal Crear Pedido
                    const openBtnPedido = document.getElementById("openModalBtnPedido");
                    const modalPedido = document.getElementById("pedidoModal");
                    const closeBtnPedido = document.querySelector(".closePedido");
                    const cancelPedidoBtn = document.getElementById("cancelPedidoBtn");

                    // Modal Agregar Producto
                    const modalAgregarProducto = document.getElementById("agregarProductoModal");
                    const closeBtnAgregarProducto = document.querySelector(".closeAgregarProducto");
                    const cancelAgregarProductoBtn = document.getElementById("cancelAgregarProductoBtn");

                    // Abrir modal crear pedido
                    if (openBtnPedido) openBtnPedido.onclick = () => modalPedido.classList.add("show");
                    if (closeBtnPedido) closeBtnPedido.onclick = () => modalPedido.classList.remove("show");
                    if (cancelPedidoBtn) cancelPedidoBtn.onclick = () => modalPedido.classList.remove("show");

                    // Abrir modal agregar producto (solo manualmente o despu√©s de crear pedido)
                    if (closeBtnAgregarProducto) closeBtnAgregarProducto.onclick = () => modalAgregarProducto.classList.remove("show");
                    if (cancelAgregarProductoBtn) cancelAgregarProductoBtn.onclick = () => modalAgregarProducto.classList.remove("show");

                    // Cerrar modales al hacer clic fuera
                    window.onclick = (event) => {
                        if (event.target === modalPedido) modalPedido.classList.remove("show");
                        if (event.target === modalAgregarProducto) modalAgregarProducto.classList.remove("show");
                    };

                    // Manejar el flujo: al crear pedido, abrir modal agregar producto
                    document.getElementById("crearPedidoForm").onsubmit = function (e) {
                        e.preventDefault();
                        const form = e.target;
                        fetch('/insertped', {
                            method: 'POST',
                            body: new FormData(form)
                        })
                            .then(response => {
                                if (!response.ok) throw new Error("Network response was not ok");
                                return response.json();
                            })
                            .then(data => {
                                if (data.success) {
                                    window.location.href = "/Pedidos"; // <--- Redirecci√≥n aqu√≠
                                } else {
                                    alert("Error al crear pedido");
                                }
                            })
                            .catch(err => {
                                console.error(err);
                                alert("Error al crear pedido");
                            });
                    };

                    // Cuando env√≠es el formulario de agregar producto, usa el id del pedido guardado
                    document.getElementById("agregarProductoForm").onsubmit = function (e) {
                        e.preventDefault();
                        const form = e.target;
                        const pedidoId = form.dataset.pedidoId;
                        const action = `/Pedidos/${pedidoId}/agregar-productos`;
                        fetch(action, {
                            method: 'POST',
                            body: new FormData(form)
                        })
                            .then(() => {
                                modalAgregarProducto.classList.remove("show");
                                // Aqu√≠ podr√≠as actualizar la tabla de productos del pedido, etc.
                            })
                            .catch(err => alert("Error al agregar producto"));
                    };

                    // Actualiza subtotales y total al cambiar cantidades
                    document.querySelectorAll('.cantidad-input').forEach(input => {
                        input.addEventListener('input', actualizarTotales);
                    });

                    function actualizarTotales() {
                        let total = 0;
                        document.querySelectorAll('.cantidad-input').forEach((input, idx) => {
                            const precio = parseFloat(input.dataset.precioUnitario);
                            const cantidad = parseInt(input.value) || 0;
                            const subtotal = precio * cantidad;
                            input.closest('tr').querySelector('.subtotal-cell').textContent = '$' + subtotal.toFixed(2);
                            total += subtotal;
                        });
                        document.getElementById('totalPedido').textContent = total.toFixed(2);
                    }

                    // Abrir modal de detalle de pedido
                    document.querySelectorAll('.edit-product-btn').forEach(btn => {
                        btn.onclick = function () {
                            const pedidoId = btn.getAttribute('data-pedido-id');
                            fetch(`/api/pedidos/${pedidoId}/detalles`)
                                .then(res => res.json())
                                .then(detalles => {
                                    const tbody = document.getElementById('detallePedidoBody');
                                    tbody.innerHTML = '';
                                    detalles.forEach(det => {
                                        const tr = document.createElement('tr');
                                        tr.innerHTML = `
                        <td>${det.productoNombre}</td>
                        <td>${det.cantidadSolicitada}</td>
                        <td>$${det.subtotal.toFixed(2)}</td>
                    `;
                                        tbody.appendChild(tr);
                                    });
                                    document.getElementById('detallePedidoModal').classList.add('show');
                                });
                        };
                    });

                    // Cerrar modal de detalle
                    document.querySelector('.closeDetallePedido').onclick = function () {
                        document.getElementById('detallePedidoModal').classList.remove('show');
                    };
                    window.onclick = function (event) {
                        if (event.target === document.getElementById('detallePedidoModal')) {
                            document.getElementById('detallePedidoModal').classList.remove('show');
                        }
                    };


                    document.querySelectorAll('.edit-product-btn').forEach(btn => {
                        btn.onclick = function () {
                            const pedidoId = btn.getAttribute('data-pedido-id');
                            fetch(`/api/pedidos/${pedidoId}/detalles`)
                                .then(res => res.json())
                                .then(detalles => {
                                    const tbody = document.getElementById('detallePedidoBody');
                                    tbody.innerHTML = '';
                                    detalles.forEach(det => {
                                        const tr = document.createElement('tr');
                                        tr.innerHTML = `
                        <td>${det.productoNombre}</td>
                        <td>${det.cantidadSolicitada}</td>
                        <td>$${det.subtotal.toFixed(2)}</td>
                    `;
                                        tbody.appendChild(tr);
                                    });
                                    document.getElementById('detallePedidoModal').classList.add('show');
                                });
                        };
                    });

                    // Cerrar modal de detalle
                    document.querySelector('.closeDetallePedido').onclick = function () {
                        document.getElementById('detallePedidoModal').classList.remove('show');
                    };
                    window.onclick = function (event) {
                        if (event.target === document.getElementById('detallePedidoModal')) {
                            document.getElementById('detallePedidoModal').classList.remove('show');
                        }
                    };
                </script>
</body>

</html>